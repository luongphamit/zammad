window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.agent=function(t){t||(t={});var e=[],s=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?i(t):""},n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){this.agent.avatar&&(e.push('\n<img class="zammad-chat-agent-avatar" src="'),e.push(s(this.agent.avatar)),e.push('">\n')),e.push('\n<span class="zammad-chat-agent-sentence">\n  <span class="zammad-chat-agent-name">'),e.push(s(this.agent.name)),e.push("</span>\n</span>")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")};var bind=function(t,e){return function(){return t.apply(e,arguments)}},slice=[].slice,extend=function(t,e){function s(){this.constructor=t}for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;!function(t,e){var s,n,i,o,a,r,l,h,c;c=document.getElementsByTagName("script"),r=c[c.length-1],l=r.src.match(".*://([^:/]*).*")[1],h=r.src.match("(.*)://[^:/]*.*")[1],s=function(){function e(e){this.options=t.extend({},this.defaults,e),this.log=new i({debug:this.options.debug,logPrefix:this.options.logPrefix||this.logPrefix})}return e.prototype.defaults={debug:!1},e}(),i=function(){function e(e){this.log=bind(this.log,this),this.error=bind(this.error,this),this.notice=bind(this.notice,this),this.debug=bind(this.debug,this),this.options=t.extend({},this.defaults,e)}return e.prototype.defaults={debug:!1},e.prototype.debug=function(){var t;if(t=1<=arguments.length?slice.call(arguments,0):[],this.options.debug)return this.log("debug",t)},e.prototype.notice=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],this.log("notice",t)},e.prototype.error=function(){var t;return t=1<=arguments.length?slice.call(arguments,0):[],this.log("error",t)},e.prototype.log=function(e,s){var n,i,o,a;if(s.unshift("||"),s.unshift(e),s.unshift(this.options.logPrefix),console.log.apply(console,s),this.options.debug){for(a="",i=0,o=s.length;i<o;i++)a+=" ","object"==typeof(n=s[i])?a+=JSON.stringify(n):n&&n.toString?a+=n.toString():a+=n;return t(".js-chatLogDisplay").prepend("<div>"+a+"</div>")}},e}(),o=function(t){function e(t){this.stop=bind(this.stop,this),this.start=bind(this.start,this),e.__super__.constructor.call(this,t)}return extend(e,s),e.prototype.timeoutStartedAt=null,e.prototype.logPrefix="timeout",e.prototype.defaults={debug:!1,timeout:4,timeoutIntervallCheck:.5},e.prototype.start=function(){var t,e;return this.stop(),e=new Date,t=function(t){return function(){var s;if(s=new Date-new Date(e.getTime()+1e3*t.options.timeout*60),t.log.debug("Timeout check for "+t.options.timeout+" minutes (left "+s/1e3+" sec.)"),!(s<0))return t.stop(),t.options.callback()}}(this),this.log.debug("Start timeout in "+this.options.timeout+" minutes"),this.intervallId=setInterval(t,1e3*this.options.timeoutIntervallCheck*60)},e.prototype.stop=function(){if(this.intervallId)return this.log.debug("Stop timeout of "+this.options.timeout+" minutes"),clearInterval(this.intervallId)},e}(),n=function(t){function n(t){this.ping=bind(this.ping,this),this.send=bind(this.send,this),this.reconnect=bind(this.reconnect,this),this.close=bind(this.close,this),this.connect=bind(this.connect,this),this.set=bind(this.set,this),n.__super__.constructor.call(this,t)}return extend(n,s),n.prototype.logPrefix="io",n.prototype.set=function(t){var e,s,n;s=[];for(e in t)n=t[e],s.push(this.options[e]=n);return s},n.prototype.connect=function(){return this.log.debug("Connecting to "+this.options.host),this.ws=new e.WebSocket(""+this.options.host),this.ws.onopen=function(t){return function(e){return t.log.debug("onOpen",e),t.options.onOpen(e),t.ping()}}(this),this.ws.onmessage=function(t){return function(e){var s,n,i;for(i=JSON.parse(e.data),t.log.debug("onMessage",e.data),s=0,n=i.length;s<n;s++)"pong"===i[s].event&&t.ping();if(t.options.onMessage)return t.options.onMessage(i)}}(this),this.ws.onclose=function(t){return function(e){if(t.log.debug("close websocket connection",e),t.pingDelayId&&clearTimeout(t.pingDelayId),t.manualClose){if(t.log.debug("manual close, onClose callback"),t.manualClose=!1,t.options.onClose)return t.options.onClose(e)}else if(t.log.debug("error close, onError callback"),t.options.onError)return t.options.onError("Connection lost...")}}(this),this.ws.onerror=function(t){return function(e){if(t.log.debug("onError",e),t.options.onError)return t.options.onError(e)}}(this)},n.prototype.close=function(){return this.log.debug("close websocket manually"),this.manualClose=!0,this.ws.close()},n.prototype.reconnect=function(){return this.log.debug("reconnect"),this.close(),this.connect()},n.prototype.send=function(t,e){var s;return null==e&&(e={}),this.log.debug("send",t,e),s=JSON.stringify({event:t,data:e}),this.ws.send(s)},n.prototype.ping=function(){var t;return t=function(t){return function(){return t.send("ping")}}(this),this.pingDelayId=setTimeout(t,29e3)},n}(),a=function(i){function a(s){return this.removeAttributes=bind(this.removeAttributes,this),this.startTimeoutObservers=bind(this.startTimeoutObservers,this),this.onCssLoaded=bind(this.onCssLoaded,this),this.setAgentOnlineState=bind(this.setAgentOnlineState,this),this.onConnectionEstablished=bind(this.onConnectionEstablished,this),this.setSessionId=bind(this.setSessionId,this),this.onConnectionReestablished=bind(this.onConnectionReestablished,this),this.reconnect=bind(this.reconnect,this),this.destroy=bind(this.destroy,this),this.onScrollHintClick=bind(this.onScrollHintClick,this),this.detectScrolledtoBottom=bind(this.detectScrolledtoBottom,this),this.onLeaveTemporary=bind(this.onLeaveTemporary,this),this.onAgentTypingEnd=bind(this.onAgentTypingEnd,this),this.onAgentTypingStart=bind(this.onAgentTypingStart,this),this.onQueue=bind(this.onQueue,this),this.onQueueScreen=bind(this.onQueueScreen,this),this.onWebSocketClose=bind(this.onWebSocketClose,this),this.onCloseAnimationEnd=bind(this.onCloseAnimationEnd,this),this.close=bind(this.close,this),this.toggle=bind(this.toggle,this),this.sessionClose=bind(this.sessionClose,this),this.onOpenAnimationEnd=bind(this.onOpenAnimationEnd,this),this.open=bind(this.open,this),this.renderMessage=bind(this.renderMessage,this),this.receiveMessage=bind(this.receiveMessage,this),this.onSubmit=bind(this.onSubmit,this),this.onFocus=bind(this.onFocus,this),this.onInput=bind(this.onInput,this),this.onReopenSession=bind(this.onReopenSession,this),this.onError=bind(this.onError,this),this.onWebSocketMessage=bind(this.onWebSocketMessage,this),this.send=bind(this.send,this),this.checkForEnter=bind(this.checkForEnter,this),this.render=bind(this.render,this),this.view=bind(this.view,this),this.T=bind(this.T,this),this.options=t.extend({},this.defaults,s),a.__super__.constructor.call(this,this.options),this.isFullscreen=e.matchMedia&&e.matchMedia("(max-width: 768px)").matches,this.scrollRoot=t(this.getScrollRoot()),t?e.WebSocket&&sessionStorage?this.options.chatId?(this.options.lang||(this.options.lang=t("html").attr("lang")),this.options.lang&&(this.translations[this.options.lang]||(this.log.debug("lang: No "+this.options.lang+" found, try first two letters"),this.options.lang=this.options.lang.replace(/-.+?$/,"")),this.log.debug("lang: "+this.options.lang)),this.options.host||this.detectHost(),this.loadCss(),this.io=new n(this.options),this.io.set({onOpen:this.render,onClose:this.onWebSocketClose,onMessage:this.onWebSocketMessage,onError:this.onError}),void this.io.connect()):(this.state="unsupported",void this.log.error("Chat: need chatId as option!")):(this.state="unsupported",void this.log.notice("Chat: Browser not supported!")):(this.state="unsupported",void this.log.notice("Chat: no jquery found!"))}return extend(a,s),a.prototype.defaults={chatId:void 0,show:!0,target:t("body"),host:"",debug:!1,flat:!1,lang:void 0,cssAutoload:!0,cssUrl:void 0,fontSize:void 0,buttonClass:"open-zammad-chat",inactiveClass:"is-inactive",title:"<strong>Chat</strong> with us!",scrollHint:"Scroll down to see new messages",idleTimeout:6,idleTimeoutIntervallCheck:.5,inactiveTimeout:8,inactiveTimeoutIntervallCheck:.5,waitingListTimeout:4,waitingListTimeoutIntervallCheck:.5},a.prototype.logPrefix="chat",a.prototype._messageCount=0,a.prototype.isOpen=!1,a.prototype.blinkOnlineInterval=null,a.prototype.stopBlinOnlineStateTimeout=null,a.prototype.showTimeEveryXMinutes=2,a.prototype.lastTimestamp=null,a.prototype.lastAddedType=null,a.prototype.inputTimeout=null,a.prototype.isTyping=!1,a.prototype.state="offline",a.prototype.initialQueueDelay=1e4,a.prototype.translations={de:{"<strong>Chat</strong> with us!":"<strong>Chatte</strong> mit uns!","Scroll down to see new messages":"Scrolle nach unten um neue Nachrichten zu sehen",Online:"Online",Offline:"Offline",Connecting:"Verbinden","Connection re-established":"Verbindung wiederhergestellt",Today:"Heute",Send:"Senden","Compose your message...":"Ihre Nachricht...","All colleagues are busy.":"Alle Kollegen sind belegt.","You are on waiting list position <strong>%s</strong>.":"Sie sind in der Warteliste an der Position <strong>%s</strong>.","Start new conversation":"Neue Konversation starten","Since you didn't respond in the last %s minutes your conversation with <strong>%s</strong> got closed.":"Da Sie in den letzten %s Minuten nichts geschrieben haben wurde Ihre Konversation mit <strong>%s</strong> geschlossen.","Since you didn't respond in the last %s minutes your conversation got closed.":"Da Sie in den letzten %s Minuten nichts geschrieben haben wurde Ihre Konversation geschlossen.","We are sorry, it takes longer as expected to get an empty slot. Please try again later or send us an email. Thank you!":"Es tut uns leid, es dauert l√§nger als erwartet, um einen freien Platz zu erhalten. Bitte versuchen Sie es zu einem sp√§teren Zeitpunkt noch einmal oder schicken Sie uns eine E-Mail. Vielen Dank!"},es:{"<strong>Chat</strong> with us!":"<strong>Chatee</strong> con nosotros!","Scroll down to see new messages":"Haga scroll hacia abajo para ver nuevos mensajes",Online:"En linea",Offline:"Desconectado",Connecting:"Conectando","Connection re-established":"Conexi√≥n restablecida",Today:"Hoy",Send:"Enviar","Compose your message...":"Escriba su mensaje...","All colleagues are busy.":"Todos los agentes est√°n ocupados.","You are on waiting list position <strong>%s</strong>.":"Usted est√° en la posici√≥n <strong>%s</strong> de la lista de espera.","Start new conversation":"Iniciar nueva conversaci√≥n","Since you didn't respond in the last %s minutes your conversation with <strong>%s</strong> got closed.":"Puesto que usted no respondi√≥ en los √∫ltimos %s minutos su conversaci√≥n con <strong>%s</strong> se ha cerrado.","Since you didn't respond in the last %s minutes your conversation got closed.":"Puesto que usted no respondi√≥ en los √∫ltimos %s minutos su conversaci√≥n se ha cerrado.","We are sorry, it takes longer as expected to get an empty slot. Please try again later or send us an email. Thank you!":"Lo sentimos, se tarda m√°s tiempo de lo esperado para ser atendido por un agente. Int√©ntelo de nuevo m√°s tarde o env√≠enos un correo electr√≥nico. ¬°Gracias!"},fr:{"<strong>Chat</strong> with us!":"<strong>Chattez</strong> avec nous!","Scroll down to see new messages":"Faites d√©filer pour lire les nouveaux messages",Online:"En-ligne",Offline:"Hors-ligne",Connecting:"Connexion en cours","Connection re-established":"Connexion r√©tablie",Today:"Aujourdhui",Send:"Envoyer","Compose your message...":"Composez votre message...","All colleagues are busy.":"Tous les coll√®gues sont actuellement occup√©s.","You are on waiting list position <strong>%s</strong>.":"Vous √™tes actuellement en <strong>%s</strong> position dans la file d'attente.","Start new conversation":"D√©marrer une nouvelle conversation","Since you didn't respond in the last %s minutes your conversation with <strong>%s</strong> got closed.":"Si vous ne r√©pondez pas dans les <strong>%s</strong> minutes, votre conversation avec %s va √™tre ferm√©e.","Since you didn't respond in the last %s minutes your conversation got closed.":"Si vous ne r√©pondez pas dans les %s minutes, votre conversation va √™tre ferm√©e.","We are sorry, it takes longer as expected to get an empty slot. Please try again later or send us an email. Thank you!":"Nous sommes d√©sol√©s, il faut plus de temps que pr√©vu pour obtenir un emplacement vide. Veuillez r√©essayer ult√©rieurement ou nous envoyer un courriel. Je vous remercie!"},"zh-cn":{"<strong>Chat</strong> with us!":"ÂèëËµ∑<strong>Âç≥Êó∂ÂØπËØù</strong>!","Scroll down to see new messages":"Âêë‰∏ãÊªöÂä®‰ª•Êü•ÁúãÊñ∞Ê∂àÊÅØ",Online:"Âú®Á∫ø",Offline:"Á¶ªÁ∫ø",Connecting:"ËøûÊé•‰∏≠","Connection re-established":"Ê≠£Âú®ÈáçÊñ∞Âª∫Á´ãËøûÊé•",Today:"‰ªäÂ§©",Send:"ÂèëÈÄÅ","Compose your message...":"Ê≠£Âú®ËæìÂÖ•‰ø°ÊÅØ...","All colleagues are busy.":"ÊâÄÊúâÂ∑•‰Ωú‰∫∫ÂëòÈÉΩÂú®ÂøôÁ¢å‰∏≠.","You are on waiting list position <strong>%s</strong>.":"ÊÇ®ÁõÆÂâçÁöÑÁ≠âÂÄô‰ΩçÁΩÆÊòØÁ¨¨ <strong>%s</strong> ‰Ωç.","Start new conversation":"ÂºÄÂßãÊñ∞ÁöÑ‰ºöËØù","Since you didn't respond in the last %s minutes your conversation with <strong>%s</strong> got closed.":"Áî±‰∫éÊÇ®Ë∂ÖËøá %s ÂàÜÈíüÊ≤°ÊúâÂõûÂ§ç, ÊÇ®‰∏é <strong>%s</strong> ÁöÑ‰ºöËØùÂ∑≤Ë¢´ÂÖ≥Èó≠.","Since you didn't respond in the last %s minutes your conversation got closed.":"Áî±‰∫éÊÇ®Ë∂ÖËøá %s ÂàÜÈíüÊ≤°Êúâ‰ªª‰ΩïÂõûÂ§ç, ËØ•ÂØπËØùÂ∑≤Ë¢´ÂÖ≥Èó≠.","We are sorry, it takes longer as expected to get an empty slot. Please try again later or send us an email. Thank you!":"ÈùûÂ∏∏Êä±Ê≠â, ÁõÆÂâçÈúÄË¶ÅÁ≠âÂÄôÊõ¥ÈïøÁöÑÊó∂Èó¥ÊâçËÉΩÊé•ÂÖ•ÂØπËØù, ËØ∑Á®çÂêéÈáçËØïÊàñÂêëÊàë‰ª¨ÂèëÈÄÅÁîµÂ≠êÈÇÆ‰ª∂. Ë∞¢Ë∞¢!"},"zh-tw":{"<strong>Chat</strong> with us!":"ÈñãÂßã<strong>Âç≥ÊôÇÂ∞çËØù</strong>!","Scroll down to see new messages":"Âêë‰∏ãÊªëÂãï‰ª•Êü•ÁúãÊñ∞Ë®äÊÅØ",Online:"Á∑ö‰∏ä",Offline:"Á¶ªÁ∫ø",Connecting:"ÈÄ£Á∑ö‰∏≠","Connection re-established":"Ê≠£Âú®ÈáçÊñ∞Âª∫Á´ãÈÄ£Á∑ö‰∏≠",Today:"‰ªäÂ§©",Send:"ÁôºÈÄÅ","Compose your message...":"Ê≠£Âú®Ëº∏ÂÖ•Ë®äÊÅØ...","All colleagues are busy.":"ÊâÄÊúâÊúçÂãô‰∫∫Âì°ÈÉΩÂú®ÂøôÁ¢å‰∏≠.","You are on waiting list position <strong>%s</strong>.":"‰Ω†ÁõÆÂâçÁöÑÁ≠âÂÄô‰ΩçÁΩÆÊòØÁ¨¨ <strong>%s</strong> È†Ü‰Ωç.","Start new conversation":"ÈñãÂßãÊñ∞ÁöÑÂ∞çË©±","Since you didn't respond in the last %s minutes your conversation with <strong>%s</strong> got closed.":"Áî±Êñº‰Ω†Ë∂ÖÈÅé %s ÂàÜÈêòÊ≤íÊúâÂõûÊáâ, ‰Ω†Ëàá <strong>%s</strong> ÁöÑÂ∞çË©±Â∑≤Ë¢´ÈóúÈñâ.","Since you didn't respond in the last %s minutes your conversation got closed.":"Áî±Êñº‰Ω†Ë∂ÖÈÅé %s ÂàÜÈêòÊ≤íÊúâ‰ªª‰ΩïÂõûÊáâ, Ë©≤Â∞çË©±Â∑≤Ë¢´ÈóúÈñâ.","We are sorry, it takes longer as expected to get an empty slot. Please try again later or send us an email. Thank you!":"ÈùûÂ∏∏Êä±Ê≠â, Áï∂ÂâçÈúÄË¶ÅÁ≠âÂÄôÊõ¥Èï∑ÁöÑÊôÇÈñìÊñπÂèØÊéíÂÖ•Â∞çË©±Á®ãÂ∫è, Ë´ãÁ®çÂæåÈáçË©¶ÊàñÂêëÊàëÂÄëÂØÑÈÄÅÈõªÂ≠êÈÉµ‰ª∂. Ë¨ùË¨ù!"}},a.prototype.sessionId=void 0,a.prototype.scrolledToBottom=!0,a.prototype.scrollSnapTolerance=10,a.prototype.richTextFormatKey={66:!0,73:!0,85:!0,83:!0},a.prototype.T=function(){var t,e,s,n,i,o;if(i=arguments[0],e=2<=arguments.length?slice.call(arguments,1):[],this.options.lang&&"en"!==this.options.lang&&(this.translations[this.options.lang]?((o=this.translations[this.options.lang])[i]||this.log.notice("Translation needed for '"+i+"'"),i=o[i]||i):this.log.notice("Translation '"+this.options.lang+"' needed!")),e)for(s=0,n=e.length;s<n;s++)t=e[s],i=i.replace(/%s/,t);return i},a.prototype.view=function(t){return function(s){return function(n){return n||(n={}),n.T=s.T,n.background=s.options.background,n.flat=s.options.flat,n.fontSize=s.options.fontSize,e.zammadChatTemplates[t](n)}}(this)},a.prototype.getScrollRoot=function(){var t,e,s;return"scrollingElement"in document?document.scrollingElement:(e=document.documentElement,s=e.scrollTop,e.scrollTop=s+1,t=e.scrollTop,e.scrollTop=s,t>s?e:document.body)},a.prototype.render=function(){return this.el&&t(".zammad-chat").get(0)||this.renderBase(),t("."+this.options.buttonClass).addClass(this.inactiveClass),this.setAgentOnlineState("online"),this.log.debug("widget rendered"),this.startTimeoutObservers(),this.idleTimeout.start(),this.sessionId=sessionStorage.getItem("sessionId"),this.send("chat_status_customer",{session_id:this.sessionId,url:e.location.href})},a.prototype.renderBase=function(){if(this.el=t(this.view("chat")({title:this.options.title,scrollHint:this.options.scrollHint})),this.options.target.append(this.el),this.input=this.el.find(".zammad-chat-input"),this.el.find(".js-chat-open").click(this.open),this.el.find(".js-chat-toggle").click(this.toggle),this.el.find(".zammad-chat-controls").on("submit",this.onSubmit),this.el.find(".zammad-chat-body").on("scroll",this.detectScrolledtoBottom),this.el.find(".zammad-scroll-hint").click(this.onScrollHintClick),this.input.on({keydown:this.checkForEnter,input:this.onInput}),this.input.on("keydown",function(t){return function(e){var s;if(s=!1,e.altKey||e.ctrlKey||!e.metaKey?e.altKey||!e.ctrlKey||e.metaKey||(s=!0):s=!0,s&&t.richTextFormatKey[e.keyCode]){if(e.preventDefault(),66===e.keyCode)return document.execCommand("bold"),!0;if(73===e.keyCode)return document.execCommand("italic"),!0;if(85===e.keyCode)return document.execCommand("underline"),!0;if(83===e.keyCode)return document.execCommand("strikeThrough"),!0}}}(this)),this.input.on("paste",function(s){return function(n){var i,o,a,r,l,h,c,d,u,p,m,g;if(n.stopPropagation(),n.preventDefault(),n.clipboardData)i=n.clipboardData;else if(e.clipboardData)i=e.clipboardData;else{if(!n.originalEvent.clipboardData)throw"No clipboardData support";i=n.originalEvent.clipboardData}if(h=!1,i&&i.items&&i.items[0]&&("file"!==(c=i.items[0]).kind||"image/png"!==c.type&&"image/jpeg"!==c.type||(l=c.getAsFile(),(u=new FileReader).onload=function(t){var e,n,i;return i=t.target.result,e=document.createElement("img"),e.src=i,n=function(t,n,o,a){return s.isRetina()&&(n/=2,2),i=t,e='<img style="width: 100%; max-width: '+n+'px;" src="'+i+'">',document.execCommand("insertHTML",!1,e)},s.resizeImage(e.src,460,"auto",2,"image/jpeg","auto",n)},u.readAsDataURL(l),h=!0)),!h){g=void 0,o=void 0;try{g=i.getData("text/html"),o="html",g&&0!==g.length||(o="text",g=i.getData("text/plain")),g&&0!==g.length||(o="text2",g=i.getData("text"))}catch(t){n=t,console.log("Sorry, can't insert markup because browser is not supporting it."),o="text3",g=i.getData("text")}return"text"!==o&&"text2"!==o&&"text3"!==o||(g="<div>"+g.replace(/\n/g,"</div><div>")+"</div>",g=g.replace(/<div><\/div>/g,"<div><br></div>")),console.log("p",o,g),"html"===o&&(a=t("<div>"+g+"</div>"),d=!1,r=g,p=new RegExp("<(/w|w):[A-Za-z]"),r.match(p)&&(d=!0,r=r.replace(p,"")),p=new RegExp("<(/o|o):[A-Za-z]"),r.match(p)&&(d=!0,r=r.replace(p,"")),d&&(a=s.wordFilter(a)),(a=t(a)).contents().each(function(){if(8===this.nodeType)return t(this).remove()}),a.find("a, font, small, time, form, label").replaceWith(function(){return t(this).contents()}),m="div",a.find("textarea").each(function(){var e,s;return s=this.outerHTML,p=new RegExp("<"+this.tagName,"i"),e=s.replace(p,"<"+m),p=new RegExp("</"+this.tagName,"i"),e=e.replace(p,"</"+m),t(this).replaceWith(e)}),a.find("font, img, svg, input, select, button, style, applet, embed, noframes, canvas, script, frame, iframe, meta, link, title, head, fieldset").remove(),s.removeAttributes(a),g=a.html()),"text3"===o?s.pasteHtmlAtCaret(g):document.execCommand("insertHTML",!1,g),!0}}}(this)),this.input.on("drop",function(s){return function(n){var i,o,a,r,l;if(n.stopPropagation(),n.preventDefault(),e.dataTransfer)i=e.dataTransfer;else{if(!n.originalEvent.dataTransfer)throw"No clipboardData support";i=n.originalEvent.dataTransfer}if(r=n.clientX,l=n.clientY,(o=i.files[0]).type.match("image.*"))return a=new FileReader,a.onload=function(e){var n,i,o;return o=e.target.result,n=document.createElement("img"),n.src=o,i=function(e,i,a,h){var c,d;return s.isRetina()&&(i/=2,2),o=e,n=t('<img style="width: 100%; max-width: '+i+'px;" src="'+o+'">'),n=n.get(0),document.caretPositionFromPoint?(c=document.caretPositionFromPoint(r,l),(d=document.createRange()).setStart(c.offsetNode,c.offset),d.collapse(),d.insertNode(n)):document.caretRangeFromPoint?(d=document.caretRangeFromPoint(r,l)).insertNode(n):console.log("could not find carat")},s.resizeImage(n.src,460,"auto",2,"image/jpeg","auto",i)},a.readAsDataURL(o)}}(this)),t(e).on("beforeunload",function(t){return function(){return t.onLeaveTemporary()}}(this)),t(e).bind("hashchange",function(t){return function(){if(!t.isOpen)return t.idleTimeout.start();t.sessionId&&t.send("chat_session_notice",{session_id:t.sessionId,message:e.location.href})}}(this)),this.isFullscreen)return this.input.on({focus:this.onFocus,focusout:this.onFocusOut})},a.prototype.checkForEnter=function(t){if(!t.shiftKey&&13===t.keyCode)return t.preventDefault(),this.sendMessage()},a.prototype.send=function(t,e){return null==e&&(e={}),e.chat_id=this.options.chatId,this.io.send(t,e)},a.prototype.onWebSocketMessage=function(t){var e,s,n;for(e=0,s=t.length;e<s;e++)switch(n=t[e],this.log.debug("ws:onmessage",n),n.event){case"chat_error":this.log.notice(n.data),n.data&&"chat_disabled"===n.data.state&&this.destroy({remove:!0});break;case"chat_session_message":if(n.data.self_written)return;this.receiveMessage(n.data);break;case"chat_session_typing":if(n.data.self_written)return;this.onAgentTypingStart();break;case"chat_session_start":this.onConnectionEstablished(n.data);break;case"chat_session_queue":this.onQueueScreen(n.data);break;case"chat_session_closed":case"chat_session_left":this.onSessionClosed(n.data);break;case"chat_status_customer":switch(n.data.state){case"online":this.sessionId=void 0,!this.options.cssAutoload||this.cssLoaded?this.onReady():this.socketReady=!0;break;case"offline":this.onError("Zammad Chat: No agent online");break;case"chat_disabled":this.onError("Zammad Chat: Chat is disabled");break;case"no_seats_available":this.onError("Zammad Chat: Too many clients in queue. Clients in queue: "+n.data.queue);break;case"reconnect":this.onReopenSession(n.data)}}},a.prototype.onReady=function(){if(this.log.debug("widget ready for use"),t("."+this.options.buttonClass).click(this.open).removeClass(this.inactiveClass),this.options.show)return this.show()},a.prototype.onError=function(e){return this.log.debug(e),this.addStatus(e),t("."+this.options.buttonClass).hide(),this.isOpen?(this.disableInput(),this.destroy({remove:!1})):this.destroy({remove:!0})},a.prototype.onReopenSession=function(t){var e,s,n,i,o;if(this.log.debug("old messages",t.session),this.inactiveTimeout.start(),o=sessionStorage.getItem("unfinished_message"),t.agent){for(this.onConnectionEstablished(t),e=0,s=(i=t.session).length;e<s;e++)n=i[e],this.renderMessage({message:n.content,id:n.id,from:n.created_by_id?"agent":"customer"});o&&this.input.html(o)}if(t.position&&this.onQueue(t),this.show(),this.open(),this.scrollToBottom(),o)return this.input.focus()},a.prototype.onInput=function(){return this.el.find(".zammad-chat-message--unread").removeClass("zammad-chat-message--unread"),sessionStorage.setItem("unfinished_message",this.input.html()),this.onTyping()},a.prototype.onFocus=function(){var s;if(t(e).scrollTop(10),s=t(e).scrollTop()>0,t(e).scrollTop(0),s)return this.log.notice("virtual keyboard shown")},a.prototype.onFocusOut=function(){},a.prototype.onTyping=function(){if(!(this.isTyping&&this.isTyping>new Date((new Date).getTime()-1500)))return this.isTyping=new Date,this.send("chat_session_typing",{session_id:this.sessionId}),this.inactiveTimeout.start()},a.prototype.onSubmit=function(t){return t.preventDefault(),this.sendMessage()},a.prototype.sendMessage=function(){var t,e;if(t=this.input.html())return this.inactiveTimeout.start(),sessionStorage.removeItem("unfinished_message"),e=this.view("message")({message:t,from:"customer",id:this._messageCount++,unreadClass:""}),this.maybeAddTimestamp(),this.el.find(".zammad-chat-message--typing").get(0)?(this.lastAddedType="typing-placeholder",this.el.find(".zammad-chat-message--typing").before(e)):(this.lastAddedType="message--customer",this.el.find(".zammad-chat-body").append(e)),this.input.html(""),this.scrollToBottom(),this.send("chat_session_message",{content:t,id:this._messageCount,session_id:this.sessionId})},a.prototype.receiveMessage=function(t){return this.inactiveTimeout.start(),this.onAgentTypingEnd(),this.maybeAddTimestamp(),this.renderMessage({message:t.message.content,id:t.id,from:"agent"}),this.scrollToBottom({showHint:!0})},a.prototype.renderMessage=function(t){return this.lastAddedType="message--"+t.from,t.unreadClass=document.hidden?" zammad-chat-message--unread":"",this.el.find(".zammad-chat-body").append(this.view("message")(t))},a.prototype.open=function(){var t;{if(!this.isOpen)return this.isOpen=!0,this.log.debug("open widget"),this.sessionId||this.showLoader(),this.el.addClass("zammad-chat-is-open"),t=this.el.height()-this.el.find(".zammad-chat-header").outerHeight(),this.el.css("bottom",-t),this.sessionId?(this.el.css("bottom",0),this.onOpenAnimationEnd()):(this.el.animate({bottom:0},500,this.onOpenAnimationEnd),this.send("chat_session_init",{url:e.location.href}));this.log.debug("widget already open, block")}},a.prototype.onOpenAnimationEnd=function(){if(this.idleTimeout.stop(),this.isFullscreen)return this.disableScrollOnRoot()},a.prototype.sessionClose=function(){return this.send("chat_session_close",{session_id:this.sessionId}),this.inactiveTimeout.stop(),this.waitingListTimeout.stop(),sessionStorage.removeItem("unfinished_message"),this.onInitialQueueDelayId&&clearTimeout(this.onInitialQueueDelayId),this.setSessionId(void 0)},a.prototype.toggle=function(t){return this.isOpen?this.close(t):this.open(t)},a.prototype.close=function(t){var e;if(this.isOpen){if(this.initDelayId&&clearTimeout(this.initDelayId),this.sessionId)return this.log.debug("close widget"),t&&t.stopPropagation(),this.sessionClose(),this.isFullscreen&&this.enableScrollOnRoot(),e=this.el.height()-this.el.find(".zammad-chat-header").outerHeight(),this.el.animate({bottom:-e},500,this.onCloseAnimationEnd);this.log.debug("can't close widget without sessionId")}else this.log.debug("can't close widget, it's not open")},a.prototype.onCloseAnimationEnd=function(){return this.el.css("bottom",""),this.el.removeClass("zammad-chat-is-open"),this.showLoader(),this.el.find(".zammad-chat-welcome").removeClass("zammad-chat-is-hidden"),this.el.find(".zammad-chat-agent").addClass("zammad-chat-is-hidden"),this.el.find(".zammad-chat-agent-status").addClass("zammad-chat-is-hidden"),this.isOpen=!1,this.io.reconnect()},a.prototype.onWebSocketClose=function(){if(!this.isOpen)return this.el?(this.el.removeClass("zammad-chat-is-shown"),this.el.removeClass("zammad-chat-is-loaded")):void 0},a.prototype.show=function(){if("offline"!==this.state)return this.el.addClass("zammad-chat-is-loaded"),this.el.addClass("zammad-chat-is-shown")},a.prototype.disableInput=function(){return this.input.prop("disabled",!0),this.el.find(".zammad-chat-send").prop("disabled",!0)},a.prototype.enableInput=function(){return this.input.prop("disabled",!1),this.el.find(".zammad-chat-send").prop("disabled",!1)},a.prototype.hideModal=function(){return this.el.find(".zammad-chat-modal").html("")},a.prototype.onQueueScreen=function(t){var e;if(this.setSessionId(t.session_id),e=function(e){return function(){return e.onQueue(t),e.waitingListTimeout.start()}}(this),!this.initialQueueDelay||this.onInitialQueueDelayId)return this.onInitialQueueDelayId&&clearTimeout(this.onInitialQueueDelayId),e();this.onInitialQueueDelayId=setTimeout(e,this.initialQueueDelay)},a.prototype.onQueue=function(t){return this.log.notice("onQueue",t.position),this.inQueue=!0,this.el.find(".zammad-chat-modal").html(this.view("waiting")({position:t.position}))},a.prototype.onAgentTypingStart=function(){if(this.stopTypingId&&clearTimeout(this.stopTypingId),this.stopTypingId=setTimeout(this.onAgentTypingEnd,3e3),!this.el.find(".zammad-chat-message--typing").get(0)&&(this.maybeAddTimestamp(),this.el.find(".zammad-chat-body").append(this.view("typingIndicator")()),this.isVisible(this.el.find(".zammad-chat-message--typing"),!0)))return this.scrollToBottom()},a.prototype.onAgentTypingEnd=function(){return this.el.find(".zammad-chat-message--typing").remove()},a.prototype.onLeaveTemporary=function(){if(this.sessionId)return this.send("chat_session_leave_temporary",{session_id:this.sessionId})},a.prototype.maybeAddTimestamp=function(){var t,e,s;if(s=Date.now(),!this.lastTimestamp||s-this.lastTimestamp>6e4*this.showTimeEveryXMinutes)return t=this.T("Today"),e=(new Date).toTimeString().substr(0,5),"timestamp"===this.lastAddedType?(this.updateLastTimestamp(t,e),this.lastTimestamp=s):(this.el.find(".zammad-chat-body").append(this.view("timestamp")({label:t,time:e})),this.lastTimestamp=s,this.lastAddedType="timestamp",this.scrollToBottom())},a.prototype.updateLastTimestamp=function(t,e){if(this.el)return this.el.find(".zammad-chat-body").find(".zammad-chat-timestamp").last().replaceWith(this.view("timestamp")({label:t,time:e}))},a.prototype.addStatus=function(t){if(this.el)return this.maybeAddTimestamp(),this.el.find(".zammad-chat-body").append(this.view("status")({status:t})),this.scrollToBottom()},a.prototype.detectScrolledtoBottom=function(){var t;if(t=this.el.find(".zammad-chat-body").scrollTop()+this.el.find(".zammad-chat-body").outerHeight(),this.scrolledToBottom=Math.abs(t-this.el.find(".zammad-chat-body").prop("scrollHeight"))<=this.scrollSnapTolerance,this.scrolledToBottom)return this.el.find(".zammad-scroll-hint").addClass("is-hidden")},a.prototype.showScrollHint=function(){return this.el.find(".zammad-scroll-hint").removeClass("is-hidden"),this.el.find(".zammad-chat-body").scrollTop(this.el.find(".zammad-chat-body").scrollTop()+this.el.find(".zammad-scroll-hint").outerHeight())},a.prototype.onScrollHintClick=function(){return this.el.find(".zammad-chat-body").animate({scrollTop:this.el.find(".zammad-chat-body").prop("scrollHeight")},300)},a.prototype.scrollToBottom=function(e){var s;return s=(null!=e?e:{showHint:!1}).showHint,this.scrolledToBottom?this.el.find(".zammad-chat-body").scrollTop(t(".zammad-chat-body").prop("scrollHeight")):s?this.showScrollHint():void 0},a.prototype.destroy=function(t){return null==t&&(t={}),this.log.debug("destroy widget",t),this.setAgentOnlineState("offline"),t.remove&&this.el&&this.el.remove(),this.waitingListTimeout&&this.waitingListTimeout.stop(),this.inactiveTimeout&&this.inactiveTimeout.stop(),this.idleTimeout&&this.idleTimeout.stop(),this.io.close()},a.prototype.reconnect=function(){return this.log.notice("reconnecting"),this.disableInput(),this.lastAddedType="status",this.setAgentOnlineState("connecting"),this.addStatus(this.T("Connection lost"))},a.prototype.onConnectionReestablished=function(){return this.lastAddedType="status",this.setAgentOnlineState("online"),this.addStatus(this.T("Connection re-established"))},a.prototype.onSessionClosed=function(t){return this.addStatus(this.T("Chat closed by %s",t.realname)),this.disableInput(),this.setAgentOnlineState("offline"),this.inactiveTimeout.stop()},a.prototype.setSessionId=function(t){return this.sessionId=t,void 0===t?sessionStorage.removeItem("sessionId"):sessionStorage.setItem("sessionId",t)},a.prototype.onConnectionEstablished=function(t){return this.onInitialQueueDelayId&&clearTimeout(this.onInitialQueueDelayId),this.inQueue=!1,t.agent&&(this.agent=t.agent),t.session_id&&this.setSessionId(t.session_id),this.el.find(".zammad-chat-body").html(""),this.el.find(".zammad-chat-agent").html(this.view("agent")({agent:this.agent})),this.enableInput(),this.hideModal(),this.el.find(".zammad-chat-welcome").addClass("zammad-chat-is-hidden"),this.el.find(".zammad-chat-agent").removeClass("zammad-chat-is-hidden"),this.el.find(".zammad-chat-agent-status").removeClass("zammad-chat-is-hidden"),this.isFullscreen||this.input.focus(),this.setAgentOnlineState("online"),this.waitingListTimeout.stop(),this.idleTimeout.stop(),this.inactiveTimeout.start()},a.prototype.showCustomerTimeout=function(){var t;return this.el.find(".zammad-chat-modal").html(this.view("customer_timeout")({agent:this.agent.name,delay:this.options.inactiveTimeout})),t=function(){return location.reload()},this.el.find(".js-restart").click(t),this.sessionClose()},a.prototype.showWaitingListTimeout=function(){var t;return this.el.find(".zammad-chat-modal").html(this.view("waiting_list_timeout")({delay:this.options.watingListTimeout})),t=function(){return location.reload()},this.el.find(".js-restart").click(t),this.sessionClose()},a.prototype.showLoader=function(){return this.el.find(".zammad-chat-modal").html(this.view("loader")())},a.prototype.setAgentOnlineState=function(t){var e;if(this.state=t,this.el)return e=t.charAt(0).toUpperCase()+t.slice(1),this.el.find(".zammad-chat-agent-status").attr("data-status",t).text(this.T(e))},a.prototype.detectHost=function(){var t;return t="ws://","https"===h&&(t="wss://"),this.options.host=""+t+l+"/ws"},a.prototype.loadCss=function(){var t,e,s;if(this.options.cssAutoload)return(s=this.options.cssUrl)||(s=this.options.host.replace(/^wss/i,"https").replace(/^ws/i,"http").replace(/\/ws/i,""),s+="/assets/chat/chat.css"),this.log.debug("load css from '"+s+"'"),e="@import url('"+s+"');",t=document.createElement("link"),t.onload=this.onCssLoaded,t.rel="stylesheet",t.href="data:text/css,"+escape(e),document.getElementsByTagName("head")[0].appendChild(t)},a.prototype.onCssLoaded=function(){return this.socketReady?this.onReady():this.cssLoaded=!0},a.prototype.startTimeoutObservers=function(){return this.idleTimeout=new o({logPrefix:"idleTimeout",debug:this.options.debug,timeout:this.options.idleTimeout,timeoutIntervallCheck:this.options.idleTimeoutIntervallCheck,callback:function(t){return function(){return t.log.debug("Idle timeout reached, hide widget",new Date),t.destroy({remove:!0})}}(this)}),this.inactiveTimeout=new o({logPrefix:"inactiveTimeout",debug:this.options.debug,timeout:this.options.inactiveTimeout,timeoutIntervallCheck:this.options.inactiveTimeoutIntervallCheck,callback:function(t){return function(){return t.log.debug("Inactive timeout reached, show timeout screen.",new Date),t.showCustomerTimeout(),t.destroy({remove:!1})}}(this)}),this.waitingListTimeout=new o({logPrefix:"waitingListTimeout",debug:this.options.debug,timeout:this.options.waitingListTimeout,timeoutIntervallCheck:this.options.waitingListTimeoutIntervallCheck,callback:function(t){return function(){return t.log.debug("Waiting list timeout reached, show timeout screen.",new Date),t.showWaitingListTimeout(),t.destroy({remove:!1})}}(this)})},a.prototype.disableScrollOnRoot=function(){return this.rootScrollOffset=this.scrollRoot.scrollTop(),this.scrollRoot.css({overflow:"hidden",position:"fixed"})},a.prototype.enableScrollOnRoot=function(){return this.scrollRoot.scrollTop(this.rootScrollOffset),this.scrollRoot.css({overflow:"",position:""})},a.prototype.isVisible=function(s,n,i,o){var a,r,l,h,c,d,u,p,m,g,f,v,y,b,w,T,C,z,S,k,I,A,x,_,E,O;if(!(s.length<1))if(r=t(e),a=s.length>1?s.eq(0):s,z=a.get(0),O=r.width(),E=r.height(),o=o||"both",p=!0!==i||z.offsetWidth*z.offsetHeight,"function"==typeof z.getBoundingClientRect){if(C=z.getBoundingClientRect(),S=C.top>=0&&C.top<E,u=C.bottom>0&&C.bottom<=E,b=C.left>=0&&C.left<O,T=C.right>0&&C.right<=O,k=n?S||u:S&&u,y=n?b||T:b&&T,"both"===o)return p&&k&&y;if("vertical"===o)return p&&k;if("horizontal"===o)return p&&y}else{if(_=r.scrollTop(),I=_+E,A=r.scrollLeft(),x=A+O,w=a.offset(),d=w.top,l=d+a.height(),h=w.left,c=h+a.width(),v=!0===n?l:d,m=!0===n?d:l,g=!0===n?c:h,f=!0===n?h:c,"both"===o)return!!p&&m<=I&&v>=_&&f<=x&&g>=A;if("vertical"===o)return!!p&&m<=I&&v>=_;if("horizontal"===o)return!!p&&f<=x&&g>=A}},a.prototype.isRetina=function(){var t;return!!e.matchMedia&&((t=e.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)"))&&t.matches||e.devicePixelRatio>1)},a.prototype.resizeImage=function(t,e,s,n,i,o,a,r){var l;return null==e&&(e="auto"),null==s&&(s="auto"),null==n&&(n=1),null==r&&(r=!0),l=new Image,l.onload=function(){var t,r,h,c,d;return h=l.width,r=l.height,console.log("ImageService","current size",h,r),"auto"===s&&"auto"===e&&(e=h,s=r),"auto"===s&&(s=r/(h/e)),"auto"===e&&(e=r/(h/s)),d=!1,e<h||s<r?(d=!0,e*=n,s*=n):(e=h,s=r),t=document.createElement("canvas"),t.width=e,t.height=s,t.getContext("2d").drawImage(l,0,0,e,s),"auto"===o&&(o=e<200&&s<200?1:e<400&&s<400?.9:e<600&&s<600?.8:e<900&&s<900?.7:.6),c=t.toDataURL(i,o),d?(console.log("ImageService","resize",e/n,s/n,o,.75*c.length/1024/1024,"in mb"),void a(c,e/n,s/n,!0)):(console.log("ImageService","no resize",e,s,o,.75*c.length/1024/1024,"in mb"),a(c,e,s,!1))},l.src=t},a.prototype.pasteHtmlAtCaret=function(t){var s,n,i,o,a,r;if(r=void 0,a=void 0,e.getSelection){if((r=e.getSelection()).getRangeAt&&r.rangeCount){for((a=r.getRangeAt(0)).deleteContents(),(s=document.createElement("div")).innerHTML=t,n=document.createDocumentFragment(o,i);o=s.firstChild;)i=n.appendChild(o);if(a.insertNode(n),i)return(a=a.cloneRange()).setStartAfter(i),a.collapse(!0),r.removeAllRanges(),r.addRange(a)}}else if(document.selection&&"Control"!==document.selection.type)return document.selection.createRange().pasteHTML(t)},a.prototype.wordFilter=function(e){var s,n,i;return s=e.html(),s=s.replace(/<!--[\s\S]+?-->/gi,""),s=s.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,""),s=s.replace(/<(\/?)s>/gi,"<$1strike>"),s=s.replace(/&nbsp;/gi," "),e.html(s),t("p",e).each(function(){var e,s;if(s=t(this).attr("style"),e=/mso-list:\w+ \w+([0-9]+)/.exec(s))return t(this).data("_listLevel",parseInt(e[1],10))}),n=0,i=null,t("p",e).each(function(){var e,s,o,a,r,l,h,c,d,u;if(void 0!==(e=t(this).data("_listLevel"))){if(u=t(this).text(),a="<ul></ul>",/^\s*\w+\./.test(u)&&(a=(r=/([0-9])\./.exec(u))?null!=(l=(d=parseInt(r[1],10))>1)?l:'<ol start="'+d+{'"></ol>':"<ol></ol>"}:"<ol></ol>"),e>n&&(0===n?(t(this).before(a),i=t(this).prev()):i=t(a).appendTo(i)),e<n)for(s=o=h=s,c=n-e;h<=c?o<=c:o>=c;s=h<=c?++o:--o)i=i.parent();return t("span:first",this).remove(),i.append("<li>"+t(this).html()+"</li>"),t(this).remove(),n=e}return n=0}),t("[style]",e).removeAttr("style"),t("[align]",e).removeAttr("align"),t("span",e).replaceWith(function(){return t(this).contents()}),t("span:empty",e).remove(),t("[class^='Mso']",e).removeAttr("class"),t("p:empty",e).remove(),e},a.prototype.removeAttribute=function(e){var s,n,i,o,a;if(e){for(s=t(e),i=0,o=(a=e.attributes).length;i<o;i++)(n=a[i])&&n.name&&e.removeAttribute(n.name);return s.removeAttr("style").removeAttr("class").removeAttr("lang").removeAttr("type").removeAttr("align").removeAttr("id").removeAttr("wrap").removeAttr("title")}},a.prototype.removeAttributes=function(t,e){return null==e&&(e=!0),e&&t.each(function(t){return function(e,s){return t.removeAttribute(s)}}(this)),t.find("*").each(function(t){return function(e,s){return t.removeAttribute(s)}}(this)),t},a}(),e.ZammadChat=a}(window.jQuery,window),window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.chat=function(t){t||(t={});var e=[],s=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?i(t):""},n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat'),this.flat&&e.push(s(" zammad-chat--flat")),e.push('"'),this.fontSize&&e.push(s(" style='font-size: "+this.fontSize+"'")),e.push('>\n  <div class="zammad-chat-header js-chat-open"'),this.background&&e.push(s(" style='background: "+this.background+"'")),e.push('>\n    <div class="zammad-chat-header-controls js-chat-toggle">\n      <span class="zammad-chat-agent-status zammad-chat-is-hidden" data-status="online"></span>\n      <span class="zammad-chat-header-icon">\n        <svg class="zammad-chat-header-icon-open" width="13" height="7" viewBox="0 0 13 7"><path d="M10.807 7l1.4-1.428-5-4.9L6.5-.02l-.7.7-4.9 4.9 1.414 1.413L6.5 2.886 10.807 7z" fill-rule="evenodd"/></svg>\n        <svg class="zammad-chat-header-icon-close" width="13" height="13" viewBox="0 0 13 13"><path d="m2.241.12l-2.121 2.121 4.243 4.243-4.243 4.243 2.121 2.121 4.243-4.243 4.243 4.243 2.121-2.121-4.243-4.243 4.243-4.243-2.121-2.121-4.243 4.243-4.243-4.243" fill-rule="evenodd"/></svg>\n      </span>\n    </div>\n    <div class="zammad-chat-agent zammad-chat-is-hidden">\n    </div>\n    <div class="zammad-chat-welcome">\n      <svg class="zammad-chat-icon" viewBox="0 0 24 24" width="24" height="24"><path d="M2 5C2 4 3 3 4 3h16c1 0 2 1 2 2v10C22 16 21 17 20 17H4C3 17 2 16 2 15V5zM12 17l6 4v-4h-6z"/></svg>\n      <span class="zammad-chat-welcome-text">'),e.push(this.T(this.title)),e.push('</span>\n    </div>\n  </div>\n  <div class="zammad-chat-modal"></div>\n  <div class="zammad-scroll-hint is-hidden">\n    <svg class="zammad-scroll-hint-icon" width="20" height="18" viewBox="0 0 20 18"><path d="M0,2.00585866 C0,0.898053512 0.898212381,0 1.99079514,0 L18.0092049,0 C19.1086907,0 20,0.897060126 20,2.00585866 L20,11.9941413 C20,13.1019465 19.1017876,14 18.0092049,14 L1.99079514,14 C0.891309342,14 0,13.1029399 0,11.9941413 L0,2.00585866 Z M10,14 L16,18 L16,14 L10,14 Z" fill-rule="evenodd"/></svg>\n    '),e.push(this.T(this.scrollHint)),e.push('\n  </div>\n  <div class="zammad-chat-body"></div>\n  <form class="zammad-chat-controls">\n    <div class="zammad-chat-input" rows="1" placeholder="'),e.push(this.T("Compose your message...")),e.push('" contenteditable="true"></div>\n    <button type="submit" class="zammad-chat-button zammad-chat-send"'),this.background&&e.push(s(" style='background: "+this.background+"'")),e.push(">"),e.push(this.T("Send")),e.push("</button>\n  </form>\n</div>")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.customer_timeout=function(t){t||(t={});var e=[],s=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?i(t):""},n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat-modal-text">\n  '),this.agent?(e.push("\n    "),e.push(this.T("Since you didn't respond in the last %s minutes your conversation with <strong>%s</strong> got closed.",this.delay,this.agent)),e.push("\n  ")):(e.push("\n    "),e.push(this.T("Since you didn't respond in the last %s minutes your conversation got closed.",this.delay)),e.push("\n  ")),e.push('\n  <br>\n  <div class="zammad-chat-button js-restart"'),this.background&&e.push(s(" style='background: "+this.background+"'")),e.push(">"),e.push(this.T("Start new conversation")),e.push("</div>\n</div>")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.loader=function(t){t||(t={});var e=[],s=t.safe,n=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<span class="zammad-chat-loading-animation">\n  <span class="zammad-chat-loading-circle"></span>\n  <span class="zammad-chat-loading-circle"></span>\n  <span class="zammad-chat-loading-circle"></span>\n</span>\n<span class="zammad-chat-modal-text">'),e.push(this.T("Connecting")),e.push("</span>")}).call(this)}.call(t),t.safe=s,t.escape=n,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.message=function(t){t||(t={});var e=[],s=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?i(t):""},n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat-message zammad-chat-message--'),e.push(s(this.from)),e.push(s(this.unreadClass)),e.push('">\n  <span class="zammad-chat-message-body"'),this.background&&"customer"===this.from&&e.push(s(" style='background: "+this.background+"'")),e.push(">"),e.push(this.message),e.push("</span>\n</div>")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.status=function(t){t||(t={});var e=[],s=t.safe,n=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat-status">\n  <div class="zammad-chat-status-inner">\n    '),e.push(this.status),e.push("\n  </div>\n</div>")}).call(this)}.call(t),t.safe=s,t.escape=n,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.timestamp=function(t){t||(t={});var e=[],s=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?i(t):""},n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat-timestamp"><strong>'),e.push(s(this.label)),e.push("</strong> "),e.push(s(this.time)),e.push("</div>")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.typingIndicator=function(t){t||(t={});var e=[],s=t.safe,n=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat-message zammad-chat-message--typing zammad-chat-message--agent">\n  <span class="zammad-chat-message-body">\n    <span class="zammad-chat-loading-animation">\n      <span class="zammad-chat-loading-circle"></span>\n      <span class="zammad-chat-loading-circle"></span>\n      <span class="zammad-chat-loading-circle"></span>\n    </span>\n  </span>\n</div>')}).call(this)}.call(t),t.safe=s,t.escape=n,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.waiting=function(t){t||(t={});var e=[],s=t.safe,n=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},n||(n=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat-modal-text">\n  <span class="zammad-chat-loading-animation">\n    <span class="zammad-chat-loading-circle"></span>\n    <span class="zammad-chat-loading-circle"></span>\n    <span class="zammad-chat-loading-circle"></span>\n  </span>\n  '),e.push(this.T("All colleagues are busy.")),e.push("<br>\n  "),e.push(this.T("You are on waiting list position <strong>%s</strong>.",this.position)),e.push("\n</div>")}).call(this)}.call(t),t.safe=s,t.escape=n,e.join("")},window.zammadChatTemplates||(window.zammadChatTemplates={}),window.zammadChatTemplates.waiting_list_timeout=function(t){t||(t={});var e=[],s=function(t){return t&&t.ecoSafe?t:void 0!==t&&null!=t?i(t):""},n=t.safe,i=t.escape;return t.safe=function(t){if(t&&t.ecoSafe)return t;void 0!==t&&null!=t||(t="");var e=new String(t);return e.ecoSafe=!0,e},i||(i=t.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){e.push('<div class="zammad-chat-modal-text">\n  '),e.push(this.T("We are sorry, it takes longer as expected to get an empty slot. Please try again later or send us an email. Thank you!")),e.push('\n  <br>\n  <div class="zammad-chat-button js-restart"'),this.background&&e.push(s(" style='background: "+this.background+"'")),e.push(">"),e.push(this.T("Start new conversation")),e.push("</div>\n</div>")}).call(this)}.call(t),t.safe=n,t.escape=i,e.join("")};